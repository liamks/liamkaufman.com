---
layout: post
title: "Adding Authentication, Waiting Lists and Sign Ups to an Express App Using Drawbridge.js and Redis"
date: 2012-04-21
comments: true
---

<p>
There are several popular modules for adding password-based user authentication to an Express.js app. Unfortunately, they require writing lots of code to get started. I prefer the approach that authentication libraries like Devise take: they generate code and views, and you’re free to modify, or delete, what’s created. 
</p>

<p>
Given the authentication options for Express.js I wanted to create a module that would make adding user authentication quick and easy. Moreover, I also wanted developers to be free to edit and modify the generated views. In addition to authentication I wanted the module to handle sign ups (the type you see on a just-launched startup’s page) and to handle waiting lists and invitations. Based on the module's functionality I've decided to call it Drawbridge.js.
</p>

<h2>User Authentication with Drawbridge.js</h2>
<p>
Drawbridge.js uses Redis to persists its data, but it’s possible for developers to create other database adapters for Drawbridge (pull-requests accepted). I chose Redis because its ability to pipeline multiple commands reducing round trips between the server and the database. The atomic nature of pipelined commands obviates a lot of complex callbacks and makes the resulting code much easier to understand. Overall Redis is easy to use, easy to understand and fast - great features for an authentication module. 
</p>
<p>
To send email, Drawbridge uses either nodemailer, or the postmark modules. I included the <a href="https://postmarkapp.com">Postmark</a> option because I'm currently using it and I like it. However, developers are free to add additional email adapters.
</p>

<h2>Drawbridge Screencast</h2>
<p>
I’ve created a short screencast to show how easy it is to add drawbridge to an existing Express.js application. Before you watch the screencast it’s important that I outline a couple of caveats:
</p>
<p>
  <ol>
    <li>Drawbridge is not ready for production - it’s basically a working prototype.</li>
    <li>Drawbridge views and variables are inconsistently named, that will need to be fixed.</li>
    <li>The code needs refactoring and more testing.</li>
    <li>Drawbridge needs to be picked apart for security issues.</li>
  </ol>
</p>
<p>
With those caveats out of the way here is the video:
</p>

<p>
<iframe src="http://player.vimeo.com/video/40780990?title=0&amp;byline=0&amp;portrait=0" width="400" height="300" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe><p><a href="http://vimeo.com/40780990">Drawbridge.js</a> from <a href="http://vimeo.com/user11381617">Liam Kaufman</a> on <a href="http://vimeo.com">Vimeo</a>.</p>
</p>

<p>
While I built Drawbridge.js to scratch my own itch, I hope others will find it useful as well. Once I refine it further I will most certainly start to use it in my own projects. If you’re interested in Drawbridge 1) watch the project on Github and 2) try and get it working on your toy Express apps. I welcome feedback on both the architecture of Drawbridge and its security.
</p>

<p>
<a class="github" href="https://github.com/liamks/Drawbridge.js"><span></span>Drawbridge.js on Github</a>
</p>